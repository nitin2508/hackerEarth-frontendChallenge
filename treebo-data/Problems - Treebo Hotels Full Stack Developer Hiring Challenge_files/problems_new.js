/* global ID_CLICK_BY_HISTORY: true, take_candidate_snapshot *//* global G_SCRIPTS_LOADED, mcq_timers */// this will store list of all the problems
function leadingZero(a){return a<10?"0"+a:+a}function timeHandler(){this.hElem=$("#hours"),this.mElem=$("#mins"),this.sElem=$("#secs"),this.updateTime=function(a){this.hours=Math.floor(a/3600),a-=this.hours*3600,this.mins=Math.floor(a/60),a-=this.mins*60,this.secs=a},this_ctx=this,eventStarted=$(".timer").attr("started"),eventStarted=="False"?this.eventStarted=!1:this.eventStarted=!0;var a=Number($(".timer").attr("time"));this.updateTime(a),this.mins>20?syncTime=13:syncTime=Math.floor(this.mins/2)-2,msyncTime=syncTime*60*1e3,this.setTime=function(){this.hElem.html(leadingZero(this.hours)),this.mElem.html(leadingZero(this.mins)),this.sElem.html(leadingZero(this.secs))},this.updateTimer=function(){var b=Number($("#hours").html()),c=Number($("#mins").html()),d=Number($("#secs").html());d-=1,d===-1&&(c-=1,d=59,c===-1&&(b-=1,c=59,b===-1&&(b=0,c=0,d=0))),this.hours=b,this.mins=c,this.secs=d,$("#hours").html(leadingZero(this.hours)),$("#mins").html(leadingZero(this.mins)),$("#secs").html(leadingZero(this.secs)),b===0&&c===5&&d===0&&addAlert("Test is about to finish in 5 mins");if(b===0&&c===0&&d===0){var e=$(".timer").attr("end-test");$.ajax({type:"POST",url:e,dataType:"json",success:function(b){b.status=="OK"&&(b.ended?(clearInterval(testIntervalTimer),clearInterval(syncIntervalTimer),alert("The time has completed!"),CLOSE_BROWSER=!0,window.location=$(".timer").attr("test-completed")):(b.alert_message&&addAlert(b.alert_message),a=b.left,this_ctx.updateTime(a),$("#hours").html(leadingZero(this_ctx.hours)),$("#mins").html(leadingZero(this_ctx.mins)),$("#secs").html(leadingZero(this_ctx.secs))))}})}},this.syncTimer=function(){var b=$(".timer").attr("end-test");$.ajax({type:"POST",url:b,dataType:"json",success:function(b){b.status=="OK"&&(b.ended?(alert("The time has completed!"),CLOSE_BROWSER=!0,window.location=$(".timer").attr("test-completed")):(b.alert_message&&addAlert(b.alert_message),a=b.left,this_ctx.updateTime(a),$("#hours").html(leadingZero(this_ctx.hours)),$("#mins").html(leadingZero(this_ctx.mins)),$("#secs").html(leadingZero(this_ctx.secs))))}})},this.startTimer=function(){this.eventStarted&&(testIntervalTimer=setInterval(this.updateTimer,1e3))},this.startSync=function(){this.eventStarted&&(syncIntervalTimer=setInterval(this_ctx.syncTimer,12e4))},this.init=function(){this.setTime(),this.startTimer(),setTimeout(this.startSync,msyncTime)}}function $$(a){var b;if(jq_cache.hasOwnProperty(b))return jq_cache[b];var c=$(a);return jq_cache[a]=c,c}function fetch_attempted_dots(){if(!G_SCRIPTS_LOADED){setTimeout(fetch_attempted_dots,1e3);return}var a=$(".problem-list").attr("attempted-dots-url");$.ajax({url:a,success:function(){}})}function startInititalTimers(a){for(var b in a)a.hasOwnProperty(b)&&startTimer(parseInt(b),parseInt(a[b]))}function startTimer(a,b){function d(){var d=$(".countdown-"+a),e=$(".countdown-left-"+a);if(d.length>0&&e.length>0){var f=Math.floor(b/60);f<10&&(f="0"+f);var g=b-f*60;g<10&&(g="0"+g),d.text(f+":"+g),e.text(f+":"+g)}if(b===0){clearInterval(c);var h=$("#question-"+a);h.text("Time Up!");var i=$("#countdown-"+a);i.html('<i class="fa fa-info-circle fa-red"></i> Time is over for this question.');var j=$(".answer-"+a);j.length>0&&$(j).find(".load-next-question").trigger("click")}b-=1}window.mcq_timers||(window.mcq_timers=[]);var c;mcq_timers.indexOf(a)===-1&&(mcq_timers.push(parseInt(a)),b>=0&&(c=setInterval(d,1e3)))}function disableInputs(){var a=document.getElementsByTagName("input");if(a)for(var b=0;b<a.length;++b)a[b].disabled=!0}var PROBLEM_LIST=[],jq_cache={},testIntervalTimer=0,syncIntervalTimer=0,CLOSE_BROWSER=!1,this_ctx,syncTime,msyncTime,init_time_handler=function(a){var b=new timeHandler;return b.init(),a!=="False"&&(window.onbeforeunload=function(a){if(!CLOSE_BROWSER){var b="Are you sure you want to leave?";return typeof a=="undefined"&&(a=window.event),a&&(a.returnValue=b),b}}),b},reorderSerialNumber=function(){$(".serial-no").each(function(a,b){$(this).html(a+1)}),$(".s-no").each(function(a,b){$(this).html(a+1)})},moveToNextQuestion=function(){$(".load-next-question").click()},disable_submit_button=function(){var a=$$("#problem-detail"),b=a.find("input[type=submit]");b.length>0&&b.attr("disabled","disabled")},enable_submit_button=function(){var a=$$("#problem-detail"),b=a.find("input[type=submit]");b.length>0&&b.removeAttr("disabled")},reset_mcq_answer=function(){$("#problem-detail").find("input[type=radio]:checked").removeAttr("checked")},mark_attempted=function(a){var b=$("#problem-detail").find(".errorlist li");if(b.length>=1)return;var c=$("#"+a+" .status").children().first();c&&(c.hasClass("active")||(c.addClass("active"),c.parent().attr("title","Attempted")),c.hasClass("inactive")&&c.removeClass("inactive"))},mark_unattempted=function(a){var b=$("#"+a+" .status").children().first();b&&(b.hasClass("active")&&(b.removeClass("active"),b.parent().attr("title","Not Attempted")),b.hasClass("inactive")||b.addClass("inactive"))};$(document).ready(function(){reorderSerialNumber(),$(".question-item").each(function(){PROBLEM_LIST.push($(this))}),$(".load-next-question").live("click",function(){var a=$(this),b=a.attr("target"),c=$("#"+b);return c.click(),!1}),$(".left-pane .question-item").live("click",function(){var a=$(this).attr("id");$(".left-pane .question-item").removeClass("selected"),$(".left-pane").find("#"+a).addClass("selected")}),fetch_attempted_dots(),$("#problem-detail").delegate("input[type=submit], button:not(.dryrun-button)","click",function(a){var b=$("#problem-detail"),c=b.find("input[type=radio]");if(c.length>0&&!c.is(":checked"))return;var d=b.children(":first-child").attr("data-id");mark_attempted(d)}),$("#problem-detail").on("click","input[type=radio]",enable_submit_button),$("#problem-detail").on("click",".reset-answer-js-only",reset_mcq_answer),$("#problem-detail").on("click",".reset-answer",function(){var a=$("#problem-detail"),b=a.children(":first-child").attr("data-id");mark_unattempted(b)}),$("#problem-detail").on("input propertychange","#wmd-input",function(){var a=$(".wmd-preview-container");a.hasClass("hidden")&&a.removeClass("hidden")});var a=function(){var a=$(".question-item").first();a.trigger("click"),ID_CLICK_BY_HISTORY=a.attr("id"),$(".timer").attr("started",!0);var b=$(".timer");if(b.length>0){var c=b.attr("started");init_time_handler(c)}};take_candidate_snapshot===!0?$("#my-camera").on("webcam:live",a):a(),$("#end-test-click").live("click",function(){CLOSE_BROWSER=!0}),$(".test-snapshot-button").live("click",function(a){a.preventDefault(),confirm("This test requires webcam access. Give webcam permission.")?initWebcam():($("#webcam-error").text("You can not take test without giving access to webcam."),$("#webcam-error").show())})}),$(".right-pane").on("click",".android-submit-button",function(){$(".android-start-flow").tipTip({content:"Please wait, your answer is being submitted."}),$(".android-start-flow").removeClass("android-start-flow")}),$("body").on("click",".goto-first-unattempted-question",function(a){var b=$(this).data("problem-type");$(".left-pane-content.section."+b).find(".attempted-circle.inactive").first().trigger("click"),$(".close-modal-window").trigger("click")}),$("body").on("keyup",".test-input",function(){var a=$(this).val().length,b=1024-a;$(".test-input-remaining").html(b),b===0?$(".test-error").addClass("red-text"):$(".test-error").removeClass("red-text")});